<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solved Reports - My Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/charts.css/dist/charts.min.css">
    <link rel="stylesheet" href="global.css">
    <style>
:root {
    --primary-gradient: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    --success-gradient: linear-gradient(135deg, #4cc9f0 0%, #4361ee 100%);
    --warning-gradient: linear-gradient(135deg, #f72585 0%, #7209b7 100%);
    --info-gradient: linear-gradient(135deg, #4895ef 0%, #3f37c9 100%);
}

/* ========== PERBAIKAN UTAMA UNTUK LAYOUT ========== */
.main-content {
    padding: var(--space-lg);
    background-color: var(--bg-secondary);
    min-height: 100vh;
}

.header {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
}

/* ========== PERBAIKAN STATISTIC CARDS ========== */
.maintenance-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.maintenance-stat-card {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.maintenance-stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
}

.maintenance-stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-gradient);
}

.maintenance-stat-card.completed::before {
    background: var(--success-gradient);
}

.maintenance-stat-card.this-week::before {
    background: var(--info-gradient);
}

.maintenance-stat-card.this-month::before {
    background: var(--warning-gradient);
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-md);
}

.stat-title {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--text-secondary);
    margin: 0;
}

.stat-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
}

.stat-icon.completed {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.stat-icon.this-week {
    background-color: rgba(59, 130, 246, 0.1);
    color: var(--info);
}

.stat-icon.this-month {
    background-color: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.stat-icon.average-time {
    background-color: rgba(139, 92, 246, 0.1);
    color: var(--purple);
}

.stat-value {
    font-size: 2rem;
    font-weight: var(--font-bold);
    color: var(--text-primary);
    margin-bottom: var(--space-xs);
    line-height: 1;
}

.stat-description {
    font-size: var(--text-xs);
    color: var(--text-secondary);
}

/* ========== PERBAIKAN CHART SECTION ========== */
.chart-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.chart-card {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-lg);
}

.chart-title {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0;
}

.chart-container {
    min-height: 250px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Custom styles for charts */
.custom-bar-chart {
    display: flex;
    height: 200px;
    align-items: flex-end;
    gap: 15px;
    padding: 0 10px;
    justify-content: space-around;
}

.bar-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    height: 100%;
}

.bar {
    width: 30px;
    background: var(--primary-gradient);
    border-radius: 4px 4px 0 0;
    transition: height 0.5s ease;
}

.bar-label {
    margin-top: 8px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
}

.bar-value {
    margin-bottom: 5px;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-primary);
}

.custom-pie-chart {
    position: relative;
    width: 180px;
    height: 180px;
    margin: 0 auto;
    border-radius: 50%;
    overflow: hidden;
}

.pie-segment {
    position: absolute;
    width: 100%;
    height: 100%;
    clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 100%, 50% 100%);
    border-radius: 50%;
    transform-origin: center;
}

.pie-center {
    position: absolute;
    width: 70px;
    height: 70px;
    background: var(--card-bg);
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: var(--text-primary);
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

.chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 15px;
    justify-content: center;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 12px;
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 2px;
}

.empty-chart {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-tertiary);
    font-style: italic;
}

/* ========== PERBAIKAN FILTER SECTION ========== */
.maintenance-filters {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
    padding: var(--space-lg);
    background-color: var(--card-bg);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.filter-group label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.filter-select {
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background-color: var(--input-bg);
    color: var(--text-primary);
    font-size: var(--text-sm);
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    height: 42px;
}

.filter-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
}

/* ========== PERBAIKAN ACTION BUTTONS ========== */
.maintenance-actions {
    display: flex;
    gap: var(--space-sm);
    margin-bottom: var(--space-lg);
    flex-wrap: wrap;
    align-items: center;
}

.view-toggle {
    display: flex;
    gap: var(--space-xs);
    background: var(--bg-secondary);
    padding: var(--space-xs);
    border-radius: var(--radius-md);
}

.view-toggle .btn-icon {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    color: var(--text-secondary);
    border: none;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.view-toggle .btn-icon.active,
.view-toggle .btn-icon:hover {
    background: var(--card-bg);
    color: var(--primary);
    box-shadow: var(--shadow-xs);
}

/* ========== PERBAIKAN TABLE ========== */
.activities-section {
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    margin-bottom: var(--space-xl);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-lg);
    padding-bottom: var(--space-md);
    border-bottom: 1px solid var(--border-color);
}

.section-title {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin: 0;
}

.section-actions {
    font-size: var(--text-sm);
    color: var(--text-secondary);
}

.maintenance-table-container {
    overflow-x: auto;
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
    margin-bottom: var(--space-lg);
}

.maintenance-table {
    margin: 0;
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    min-width: 900px;
}

.maintenance-table th {
    padding: var(--space-md) var(--space-lg);
    background: var(--table-header-bg);
    font-weight: var(--font-semibold);
    color: var(--text-secondary);
    border-bottom: 1px solid var(--border-color);
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
    text-align: left;
    position: sticky;
    top: 0;
}

.maintenance-table td {
    padding: var(--space-md) var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    color: var(--text-primary);
    font-size: var(--text-sm);
    vertical-align: middle;
    line-height: 1.5;
}

.maintenance-table tr:last-child td {
    border-bottom: none;
}

.maintenance-table tr:hover {
    background-color: var(--hover-color);
    transition: background-color var(--transition-fast);
}

/* Perbaikan untuk Priority Badges */
.priority-high, .priority-medium, .priority-low {
    padding: 6px 12px;
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    display: inline-block;
    text-align: center;
    min-width: 80px;
    letter-spacing: 0.3px;
}

.priority-high {
    background-color: var(--danger-light);
    color: var(--danger);
    border: 1px solid rgba(239, 68, 68, 0.2);
}

.priority-medium {
    background-color: var(--warning-light);
    color: var(--warning);
    border: 1px solid rgba(245, 158, 11, 0.2);
}

.priority-low {
    background-color: var(--success-light);
    color: var(--success);
    border: 1px solid rgba(16, 185, 129, 0.2);
}

/* Perbaikan untuk Action Buttons */
.action-buttons {
    display: flex;
    gap: var(--space-xs);
    justify-content: flex-start;
    flex-wrap: nowrap;
}

.btn-icon {
    width: 34px;
    height: 34px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    cursor: pointer;
    transition: all var(--transition-fast);
    font-size: var(--text-sm);
    padding: 0;
    box-shadow: var(--shadow-xs);
}

.btn-icon.view {
    background: var(--info-light);
    color: var(--info);
}

.btn-icon:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
    opacity: 0.9;
}

/* ========== PERBAIKAN EMPTY STATE ========== */
.empty-state {
    text-align: center;
    padding: var(--space-xl) var(--space-lg);
    background-color: var(--card-bg);
    border-radius: var(--radius-lg);
    border: 2px dashed var(--border-color);
    margin: var(--space-lg) 0;
}

.empty-state i {
    font-size: 3rem;
    color: var(--text-tertiary);
    margin-bottom: var(--space-md);
}

.empty-state h3 {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-xs);
}

.empty-state p {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
}

/* ========== PERBAIKAN PAGINATION ========== */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-md);
    margin-top: var(--space-lg);
    padding: var(--space-md) 0;
}

.page-numbers {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    font-weight: var(--font-medium);
}

/* ========== PERBAIKAN MODAL ========== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal);
    opacity: 0;
    visibility: hidden;
    transition: all var(--transition-normal);
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--card-bg);
    border-radius: var(--radius-xl);
    width: 90%;
    max-width: 700px;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-2xl);
    transform: translateY(20px);
    transition: transform var(--transition-normal);
    border: 1px solid var(--border-color);
}

.modal-overlay.active .modal {
    transform: translateY(0);
}

.modal-header {
    padding: var(--space-xl) var(--space-xl) var(--space-md);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--primary-gradient);
    color: white;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
}

.modal-title {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: white;
    margin: 0;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.modal-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: white;
    padding: 0;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-full);
    transition: all var(--transition-fast);
}

.modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

.modal-body {
    padding: var(--space-xl);
}

.modal-footer {
    padding: var(--space-lg) var(--space-xl);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-sm);
    background: var(--bg-secondary);
    border-radius: 0 0 var(--radius-xl) var(--radius-xl);
}

/* Form input static (readonly) */
.form-input-static {
    padding: var(--space-sm) 0;
    color: var(--text-primary);
    font-size: var(--text-sm);
    line-height: var(--leading-normal);
    min-height: 20px;
}

/* Time tracking styles */
.time-tracking {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    background: var(--bg-secondary);
    padding: var(--space-md);
    border-radius: var(--radius-md);
}

.time-track-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-xs) 0;
}

.time-track-label {
    font-weight: var(--font-medium);
    color: var(--text-secondary);
}

.time-track-value {
    font-weight: var(--font-semibold);
    color: var(--text-primary);
}

/* Report details styling */
.report-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
    padding: var(--space-md);
    background: var(--bg-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-color);
}

.report-detail-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.report-detail-label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.report-detail-value {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--text-primary);
    word-break: break-word;
}

/* Status info grid */
.status-info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.status-info-item {
    padding: var(--space-md);
    border-radius: var(--radius-lg);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    text-align: center;
}

.status-info-label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-xs);
}

.status-info-value {
    font-size: var(--text-md);
    font-weight: var(--font-bold);
    color: var(--text-primary);
}

/* Report description and resolution */
.report-description, .report-resolution {
    margin-bottom: var(--space-xl);
    padding: var(--space-lg);
    border-radius: var(--radius-lg);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
}

.report-description h4, .report-resolution h4 {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-md);
    padding-bottom: var(--space-xs);
    border-bottom: 2px solid var(--primary);
    display: inline-block;
}

.report-description div, .report-resolution div {
    font-size: var(--text-sm);
    line-height: 1.6;
    color: var(--text-primary);
    white-space: pre-wrap;
}

/* Enhanced buttons in modal footer */
.modal-footer .btn {
    padding: var(--space-sm) var(--space-lg);
    border-radius: var(--radius-md);
    font-weight: var(--font-semibold);
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    transition: all var(--transition-fast);
}

.modal-footer .btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Confirmation modal enhancements */
.confirm-modal {
    max-width: 500px;
}

.confirm-icon {
    text-align: center;
    margin-bottom: var(--space-lg);
}

.confirm-icon i {
    font-size: 3rem;
    color: var(--warning);
}

.confirm-message {
    text-align: center;
    font-size: var(--text-lg);
    margin-bottom: var(--space-xl);
    line-height: 1.5;
}

.confirm-actions {
    display: flex;
    justify-content: center;
    gap: var(--space-md);
}

/* ========== ANIMATIONS ========== */
.fade-in {
    animation: fadeIn 0.5s ease forwards;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Animation for modal content */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-body > * {
    animation: slideIn 0.3s ease forwards;
}

.modal-body > *:nth-child(1) { animation-delay: 0.1s; }
.modal-body > *:nth-child(2) { animation-delay: 0.2s; }
.modal-body > *:nth-child(3) { animation-delay: 0.3s; }
.modal-body > *:nth-child(4) { animation-delay: 0.4s; }

/* ========== TOAST NOTIFICATION ========== */
.toast-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 15px 20px;
    border-radius: var(--radius-md);
    color: white;
    z-index: var(--z-modal);
    max-width: 300px;
    box-shadow: var(--shadow-lg);
    opacity: 0;
    transform: translateY(-30px);
    pointer-events: none;
    animation: toast-in 0.5s ease forwards;
}

/* Animation for showing toast */
@keyframes toast-in {
    0% {
        opacity: 0;
        transform: translateY(-30px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Animation for hiding toast */
@keyframes toast-out {
    0% {
        opacity: 1;
        transform: translateY(0);
    }
    100% {
        opacity: 0;
        transform: translateY(-20px);
    }
}

.toast-notification.hide {
    animation: toast-out 0.4s ease forwards;
}

/* Status colors */
.toast-notification.success {
    background-color: var(--success);
}

.toast-notification.error {
    background-color: var(--danger);
}

.toast-notification.info {
    background-color: var(--info);
}

/* Toast content layout */
.toast-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* ========== RESPONSIVE ADJUSTMENTS ========== */
@media (max-width: 1024px) {
    .chart-section {
        grid-template-columns: 1fr;
    }
    
    .maintenance-stats {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .main-content {
        padding: var(--space-md);
    }
    
    .header {
        padding: var(--space-md);
    }
    
    .maintenance-stats {
        grid-template-columns: 1fr;
    }
    
    .maintenance-filters {
        grid-template-columns: 1fr;
    }
    
    .maintenance-actions {
        flex-direction: column;
        align-items: stretch;
    }
    
    .view-toggle {
        align-self: center;
    }
    
    .maintenance-table th, 
    .maintenance-table td {
        padding: var(--space-sm) var(--space-md);
    }
    
    .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-sm);
    }
    
    .chart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-sm);
    }
    
    .chart-header .filter-select {
        width: 100%;
    }
    
    .custom-bar-chart {
        gap: 8px;
    }
    
    .bar {
        width: 20px;
    }
    
    .bar-label {
        font-size: 10px;
    }
    
    .custom-pie-chart {
        width: 140px;
        height: 140px;
    }
    
    .pie-center {
        width: 50px;
        height: 50px;
        font-size: var(--text-xs);
    }
    
    .modal {
        width: 95%;
        margin: var(--space-md);
    }
    
    .report-details {
        grid-template-columns: 1fr;
    }
    
    .status-info-grid {
        grid-template-columns: 1fr;
    }
    
    .modal-footer {
        flex-direction: column;
    }
    
    .modal-footer .btn {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 640px) {
    .maintenance-table {
        min-width: 100%;
    }
    
    .maintenance-table th:nth-child(3),
    .maintenance-table td:nth-child(3),
    .maintenance-table th:nth-child(6),
    .maintenance-table td:nth-child(6) {
        display: none;
    }
    
    .pagination {
        flex-direction: column;
        gap: var(--space-sm);
    }
}

/* Custom scrollbar for table container */
.maintenance-table-container::-webkit-scrollbar {
    height: 8px;
}

.maintenance-table-container::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
    border-radius: var(--radius-full);
}

.maintenance-table-container::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: var(--radius-full);
}

.maintenance-table-container::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

/* Custom scrollbar for modal */
.modal::-webkit-scrollbar {
    width: 8px;
}

.modal::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
    border-radius: var(--radius-full);
}

.modal::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: var(--radius-full);
}

.modal::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
}

/* Hover effects for table rows */
.maintenance-table tr {
    transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.maintenance-table tr:hover {
    background-color: var(--hover-color);
    transform: translateX(4px);
}

/* Improved focus states for accessibility */
.btn-icon:focus,
.filter-select:focus,
.modal-close:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}
/* Notification Dropdown Styles */
.notification-bell {
    position: relative;
    cursor: pointer;
}

.notification-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    width: 350px;
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--border-color);
    z-index: var(--z-dropdown);
    margin-top: 10px;
    display: none;
    max-height: 400px;
    overflow-y: auto;
}

.notification-bell:hover .notification-dropdown {
    display: block;
}

.notification-header {
    padding: var(--space-md);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.notification-title {
    font-size: var(--text-md);
    font-weight: var(--font-semibold);
    margin: 0;
}

.notification-clear {
    background: none;
    border: none;
    color: var(--primary);
    cursor: pointer;
    font-size: var(--text-xs);
    display: flex;
    align-items: center;
    gap: 4px;
}

.notification-list {
    padding: var(--space-xs);
}

.notification-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-sm);
    border-radius: var(--radius-md);
    cursor: pointer;
    position: relative;
    transition: background-color var(--transition-fast);
}

.notification-item:hover {
    background-color: var(--hover-color);
}

.notification-item.unread {
    background-color: rgba(59, 130, 246, 0.05);
}

.notification-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.notification-icon i {
    color: var(--primary);
    font-size: var(--text-sm);
}

.notification-content {
    flex: 1;
}

.notification-message {
    margin: 0;
    font-size: var(--text-sm);
    line-height: 1.4;
    color: var(--text-primary);
}

.notification-time {
    font-size: var(--text-xs);
    color: var(--text-tertiary);
    margin-top: 2px;
    display: block;
}

.notification-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--primary);
    flex-shrink: 0;
    margin-left: auto;
}

.notification-footer {
    padding: var(--space-sm);
    border-top: 1px solid var(--border-color);
    text-align: center;
}

.notification-footer a {
    color: var(--primary);
    text-decoration: none;
    font-size: var(--text-sm);
}

.notification-footer a:hover {
    text-decoration: underline;
}
    </style>
</head>
<body>
   

    <div id="sidebar-container"></div>
    <!-- Main Content -->
    <div class="main-content">
        <div class="header">
            <div id="notificationContainer"></div>
            <button class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <h1><i class="fas fa-check-circle"></i> Solved Reports</h1>
            
            <div class="header-actions">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search solved reports..." id="dashboardSearch">
                </div>
                
             <div class="user-profile">
                    <img class="profile-img" src="https://iili.io/Fpiva7S.png" alt="Profile">
                    <div class="user-info">
                        <h4>Bang Pengshui</h4>
                        <p>Customer Service Support</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Filter Panel -->
        <div class="filter-panel fade-in">
            <div class="filter-header">
                <h3 class="filter-title">Filter Solved Reports</h3>
                <button class="filter-reset" id="resetFilters">
                    <i class="fas fa-sync-alt"></i> Reset Filters
                </button>
            </div>
            <div class="filter-grid">
                <div class="filter-group">
                    <label class="filter-label">Brand</label>
                    <select class="filter-select" id="brandFilter">
                        <option value="">All Brands</option>
                        <option value="CINTAWIN88 (D-GAMING)">CINTAWIN88 (D-GAMING)</option>
                        <option value="CERIASLOT99 (D-GAMING)">CERIASLOT99 (D-GAMING)</option>
                        <option value="RAJASCATTER88 (D-GAMING)">RAJASCATTER88 (D-GAMING)</option>
                        <option value="MAHJONGJP88 (D-GAMING)">MAHJONGJP88 (D-GAMING)</option>
                        <option value="NAGAHOKI88 (D-GAMING)">NAGAHOKI88 (D-GAMING)</option>
                        <option value="SPACEMAN88 (D-GAMING)">SPACEMAN88 (D-GAMING)</option>
                        <option value="RAJAPANEN (D-GAMING)">RAJAPANEN (D-GAMING)</option>
                        <option value="BROTO88 (D-GAMING)">BROTO88 (D-GAMING)</option>
                        <option value="MEDUSA88 (GACHA)">MEDUSA88 (GACHA)</option>
                        <option value="ATHENA168 (GACHA)">ATHENA168 (GACHA)</option>
                        <option value="ARES GACOR (GACHA)">ARES GACOR (GACHA)</option>
                        <option value="RAJA MAHJONG (GACHA)">RAJA MAHJONG (GACHA)</option>
                        <option value="OLYMPUS1000 (GACHA)">OLYMPUS1000 (GACHA)</option>
                        <option value="CLICKBET (GACHA)">CLICKBET (GACHA)</option>
                        <option value="GACHA99 (GACHA)">GACHA99 (GACHA)</option>
                        <option value="UJANGBET (BREM)">UJANGBET (BREM)</option>
                        <option value="EPISODEBET (BREM)">EPISODEBET (BREM)</option>
                        <option value="FOKUSBET88 (89ENGINE)">FOKUSBET88 (89ENGINE)</option>
                        <option value="RAJAKING88 (89ENGINE)">RAJAKING88 (89ENGINE)</option>
                        <option value="RAJANAGA99 (89ENGINE)">RAJANAGA99 (89ENGINE)</option>
                        <option value="JOIN999 (LUXION)">JOIN999 (LUXION)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Category</label>
                    <select class="filter-select" id="categoryFilter">
                        <option value="">Select Category</option>

                                    <option value="Kemenangan Pending">Kemenangan Pending</option>

                                    <option value="Replay Pending">Replay Kemenangan</option>

                                    <option value="Report Kendala Panel">Report Kendala Panel</option>

                                    <option value="Report Kendala Provider">Report Kendala Provider</option>

                                    <option value="Report Kendala Game">Report Kendala Game</option>

                                    <option value="Report Maintenance">Report Maintenance</option>

                                    <option value="Other">Other</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Date Range</label>
                    <input type="date" class="filter-input" id="dateFilterFrom">
                </div>
                <div class="filter-group">
                    <label class="filter-label">To</label>
                    <input type="date" class="filter-input" id="dateFilterTo">
                </div>
            </div>
        </div>
        
        <!-- Reports Section -->
        <div class="reports-section fade-in">
            <div class="section-header">
                <h2 class="section-title"><i class="fas fa-check-double"></i> History Completed Reports</h2>
                <div class="section-actions">
                    <button class="btn btn-danger" id="deleteAllReports">
                        <i class="fas fa-trash"></i> Delete All
                    </button>
                    <button class="btn btn-outline" id="refreshReports">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn btn-primary" id="exportReports">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
            
            <div class="reports-grid" id="reportsGrid">
                <!-- Solved reports will be loaded dynamically -->
            </div>
            <div id="noReports" class="empty-state" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <h3>No Solved Reports</h3>
                <p>You haven't completed any reports yet.</p>
            </div>
        </div>
        
        <!-- Report Details Modal -->
        <div class="modal-overlay" id="reportModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 class="modal-title"><i class="fas fa-file-alt"></i> Report Details</h3>
                    <button class="modal-close" id="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="report-details">
                        <div class="report-detail-item">
                            <div class="report-detail-label">Report ID</div>
                            <div class="report-detail-value" id="detailReportId"></div>
                        </div>
                        <div class="report-detail-item">
                            <div class="report-detail-label">Brand</div>
                            <div class="report-detail-value" id="detailReportBrand"></div>
                        </div>
                        <div class="report-detail-item">
                            <div class="report-detail-label">Date Created</div>
                            <div class="report-detail-value" id="detailReportDateCreated"></div>
                        </div>
                        <div class="report-detail-item">
                            <div class="report-detail-label">Date Solved</div>
                            <div class="report-detail-value" id="detailReportDateSolved"></div>
                        </div>
                        <div class="report-detail-item">
                            <div class="report-detail-label">Time to Resolution</div>
                            <div class="report-detail-value" id="detailReportResolutionTime"></div>
                        </div>
                    </div>
                    
                    <!-- Status Information Grid -->
                    <div class="status-info-grid">
                        <div class="status-info-item">
                            <div class="status-info-label">STATUS</div>
                            <div class="status-info-value" id="detailReportStatus"></div>
                        </div>
                        <div class="status-info-item">
                            <div class="status-info-label">CATEGORY</div>
                            <div class="status-info-value" id="detailReportCategory"></div>
                        </div>
                    </div>
                    
                    <div class="report-description">
                        <h4>Case Report</h4>
                        <div id="detailReportDescription"></div>
                    </div>
                    
                    <div class="report-resolution">
                        <h4>Solved Report</h4>
                        <div id="detailReportResolution"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="closeModalBtn">
                        <i class="fas fa-times"></i> Close
                    </button>
                    <button class="btn btn-danger" id="deleteReportBtn">
                        <i class="fas fa-trash"></i> Delete Report
                    </button>
                    <button class="btn btn-warning" id="reopenReportBtn">
                        <i class="fas fa-undo"></i> Reopen Report
                    </button>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal-overlay" id="confirmModal">
            <div class="modal confirm-modal">
                <div class="modal-header">
                    <h3 class="modal-title"><i class="fas fa-exclamation-triangle"></i> Confirmation</h3>
                    <button class="modal-close" id="closeConfirmModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="confirm-icon">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="confirm-message" id="confirmMessage"></div>
                    <div class="confirm-actions">
                        <button class="btn btn-outline" id="cancelConfirm">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn btn-danger" id="confirmAction">
                            <i class="fas fa-check"></i> Confirm
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="sidebar-loader.js"></script>
<script src="user-profile.js"></script>
<script src="notifications.js"></script>
   
   <script>
    // ========== UTILITY FUNCTIONS ==========
    
   function showToast(message, type = 'success', duration = 3000) {
    const toast = document.createElement('div');
    toast.className = `toast-notification ${type}`;

    toast.innerHTML = `
        <div class="toast-content">
            <span>${message}</span>
        </div>
    `;

    document.body.appendChild(toast);

    // Auto-hide after duration
    setTimeout(() => {
        toast.classList.add('hide');
        toast.addEventListener('animationend', () => {
            toast.remove();
        });
    }, duration);


        
        // Tambahkan ke body
        document.body.appendChild(toast);
        
        // Tampilkan toast
        setTimeout(() => {
            toast.classList.add('show');
        }, 10);
        
        // Sembunyikan setelah 3 detik
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }

    // ========== DATA MANAGEMENT FUNCTIONS ==========
    
    // Fungsi untuk mendapatkan laporan yang sudah solved
    function getSolvedReports() {
        const reports = localStorage.getItem('solvedReports');
        return reports ? JSON.parse(reports) : [];
    }

    // Fungsi untuk mendapatkan laporan pending
    function getPendingReports() {
        const reports = localStorage.getItem('pendingReports');
        return reports ? JSON.parse(reports) : [];
    }

    // Fungsi untuk menyimpan laporan pending
    function savePendingReports(reports) {
        localStorage.setItem('pendingReports', JSON.stringify(reports));
    }

    // Fungsi untuk menyimpan laporan solved
    function saveSolvedReports(reports) {
        localStorage.setItem('solvedReports', JSON.stringify(reports));
    }

    // Fungsi untuk memperbarui jumlah notifikasi
function updateBadgeCounts() {
    const pendingReports = getPendingReports();
    const notificationBadge = document.getElementById('notificationCount');
    
    if (notificationBadge) {
        // Hitung notifikasi yang belum dibaca
        const notifications = getNotifications();
        const unreadCount = notifications.filter(n => !n.read).length;
        notificationBadge.textContent = unreadCount;
    }
}
    // ========== REPORT OPERATIONS ==========
    
    // ========== REPORT OPERATIONS ==========

// Fungsi untuk memindahkan laporan kembali ke pending
function reopenReport(reportId) {
    const solvedReports = getSolvedReports();
    const pendingReports = getPendingReports();
    
    // Cari report yang akan dipindahkan
    const reportIndex = solvedReports.findIndex(report => report.id === reportId);
    
    if (reportIndex === -1) {
        showToast('Report not found!', 'error');
        return false;
    }
    
    // Ambil report dan ubah statusnya
    const reopenedReport = {...solvedReports[reportIndex]};
    reopenedReport.status = 'Pending';
    delete reopenedReport.dateSolved;
    delete reopenedReport.resolutionDescription;
    
    // Hapus dari solved dan tambahkan ke pending
    solvedReports.splice(reportIndex, 1);
    pendingReports.push(reopenedReport);
    
    // Simpan perubahan
    saveSolvedReports(solvedReports);
    savePendingReports(pendingReports);
    updateBadgeCounts();
    
    // Tambahkan notifikasi
    addNotification({
        type: 'report_reopened',
        message: `Report ${reportId} has been reopened and moved back to Pending Reports`,
        timestamp: new Date().toISOString(),
        reportId: reportId,
        read: false
    });
    
    showToast('Report reopened successfully!');
    return true;
}

// Fungsi untuk menghapus laporan solved
function deleteReport(reportId) {
    const solvedReports = getSolvedReports();
    
    // Cari report yang akan dihapus
    const reportIndex = solvedReports.findIndex(report => report.id === reportId);
    
    if (reportIndex === -1) {
        showToast('Report not found!', 'error');
        return false;
    }
    
    // Hapus report
    solvedReports.splice(reportIndex, 1);
    
    // Simpan perubahan
    saveSolvedReports(solvedReports);
    updateBadgeCounts();
    
    // Tambahkan notifikasi
    addNotification({
        type: 'report_deleted',
        message: `Report ${reportId} has been deleted from Solved Reports`,
        timestamp: new Date().toISOString(),
        reportId: reportId,
        read: false
    });
    
    showToast('Report deleted successfully!');
    return true;
}

// Fungsi untuk menghapus semua laporan solved
function deleteAllReports() {
    if (getSolvedReports().length === 0) {
        showToast('No reports to delete!', 'error');
        return false;
    }
    
    // Kosongkan semua laporan solved
    saveSolvedReports([]);
    updateBadgeCounts();
    
    // Tambahkan notifikasi
    addNotification({
        type: 'report_deleted',
        message: `All solved reports have been deleted`,
        timestamp: new Date().toISOString(),
        read: false
    });
    
    showToast('All reports deleted successfully!');
    return true;
}

    // Fungsi untuk menghapus laporan solved
    function deleteReport(reportId) {
        const solvedReports = getSolvedReports();
        
        // Cari report yang akan dihapus
        const reportIndex = solvedReports.findIndex(report => report.id === reportId);
        
        if (reportIndex === -1) {
            showToast('Report not found!', 'error');
            return false;
        }
        
        // Hapus report
        solvedReports.splice(reportIndex, 1);
        
        // Simpan perubahan
        saveSolvedReports(solvedReports);
        updateBadgeCounts();
        
        showToast('Report deleted successfully!');
        return true;
    }

    // Fungsi untuk menghapus semua laporan solved
    function deleteAllReports() {
        if (getSolvedReports().length === 0) {
            showToast('No reports to delete!', 'error');
            return false;
        }
        
        // Kosongkan semua laporan solved
        saveSolvedReports([]);
        updateBadgeCounts();
        
        showToast('All reports deleted successfully!');
        return true;
    }
// ========== NOTIFICATION FUNCTIONS ==========

// Fungsi untuk mendapatkan notifikasi
function getNotifications() {
    const notifications = localStorage.getItem('notifications');
    return notifications ? JSON.parse(notifications) : [];
}

// Fungsi untuk menyimpan notifikasi
function saveNotifications(notifications) {
    localStorage.setItem('notifications', JSON.stringify(notifications));
}

// Fungsi untuk menambahkan notifikasi baru
function addNotification(notification) {
    const notifications = getNotifications();
    notifications.unshift(notification); // Tambahkan di awal array
    saveNotifications(notifications);
    updateNotificationUI();
}

// Fungsi untuk memperbarui UI notifikasi
function updateNotificationUI() {
    const notifications = getNotifications();
    const unreadCount = notifications.filter(n => !n.read).length;
    
    // Perbarui badge count
    const notificationBadge = document.getElementById('notificationCount');
    if (notificationBadge) {
        notificationBadge.textContent = unreadCount;
    }
    
    // Perbarui dropdown notifikasi (jika ada)
    updateNotificationDropdown();
}

// Fungsi untuk memperbarui dropdown notifikasi
function updateNotificationDropdown() {
    const notificationList = document.getElementById('notificationList');
    if (!notificationList) return;
    
    const notifications = getNotifications();
    
    if (notifications.length === 0) {
        notificationList.innerHTML = `
            <div class="empty-state" style="padding: var(--space-md);">
                <i class="fas fa-bell-slash"></i>
                <p>No notifications</p>
            </div>
        `;
        return;
    }
    
    notificationList.innerHTML = '';
    
    // Batasi hanya 5 notifikasi terbaru
    const recentNotifications = notifications.slice(0, 5);
    
    recentNotifications.forEach(notification => {
        const notificationItem = document.createElement('div');
        notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
        
        // Tentukan ikon berdasarkan jenis notifikasi
        let icon = 'fas fa-bell';
        if (notification.type === 'new_report') {
            icon = 'fas fa-file-alt';
        } else if (notification.type === 'report_solved') {
            icon = 'fas fa-check-circle';
        } else if (notification.type === 'report_reopened') {
            icon = 'fas fa-undo';
        } else if (notification.type === 'report_deleted') {
            icon = 'fas fa-trash';
        }
        
        // Format waktu
        const time = formatNotificationTime(notification.timestamp);
        
        notificationItem.innerHTML = `
            <div class="notification-icon">
                <i class="${icon}"></i>
            </div>
            <div class="notification-content">
                <p class="notification-message">${notification.message}</p>
                <span class="notification-time">${time}</span>
            </div>
            ${!notification.read ? '<div class="notification-dot"></div>' : ''}
        `;
        
        // Tambahkan event listener untuk menandai sebagai telah dibaca
        notificationItem.addEventListener('click', () => {
            markNotificationAsRead(notification.timestamp);
        });
        
        notificationList.appendChild(notificationItem);
    });
}

// Fungsi untuk memformat waktu notifikasi
function formatNotificationTime(timestamp) {
    const now = new Date();
    const time = new Date(timestamp);
    const diffInMinutes = Math.floor((now - time) / (1000 * 60));
    
    if (diffInMinutes < 1) return 'Just now';
    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
    
    const diffInHours = Math.floor(diffInMinutes / 60);
    if (diffInHours < 24) return `${diffInHours}h ago`;
    
    const diffInDays = Math.floor(diffInHours / 24);
    if (diffInDays < 7) return `${diffInDays}d ago`;
    
    return time.toLocaleDateString();
}

// Fungsi untuk menandai notifikasi sebagai telah dibaca
function markNotificationAsRead(timestamp) {
    const notifications = getNotifications();
    const notificationIndex = notifications.findIndex(n => n.timestamp === timestamp);
    
    if (notificationIndex !== -1) {
        notifications[notificationIndex].read = true;
        saveNotifications(notifications);
        updateNotificationUI();
    }
}

// Fungsi untuk menandai semua notifikasi sebagai telah dibaca
function markAllNotificationsAsRead() {
    const notifications = getNotifications();
    notifications.forEach(notification => {
        notification.read = true;
    });
    saveNotifications(notifications);
    updateNotificationUI();
}
    // ========== UI FUNCTIONS ==========
    
    // Fungsi untuk menampilkan modal konfirmasi
    function showConfirmModal(message, callback) {
        const confirmModal = document.getElementById('confirmModal');
        const confirmMessage = document.getElementById('confirmMessage');
        const confirmActionBtn = document.getElementById('confirmAction');
        const cancelConfirmBtn = document.getElementById('cancelConfirm');
        const closeConfirmModalBtn = document.getElementById('closeConfirmModal');
        
        confirmMessage.textContent = message;
        
        // Hapus event listener sebelumnya
        const newConfirmActionBtn = confirmActionBtn.cloneNode(true);
        confirmActionBtn.parentNode.replaceChild(newConfirmActionBtn, confirmActionBtn);
        
        const newCancelConfirmBtn = cancelConfirmBtn.cloneNode(true);
        cancelConfirmBtn.parentNode.replaceChild(newCancelConfirmBtn, cancelConfirmBtn);
        
        const newCloseConfirmModalBtn = closeConfirmModalBtn.cloneNode(true);
        closeConfirmModalBtn.parentNode.replaceChild(newCloseConfirmModalBtn, closeConfirmModalBtn);
        
        // Tambahkan event listener baru
        newConfirmActionBtn.addEventListener('click', function() {
            callback();
            confirmModal.classList.remove('active');
        });
        
        newCancelConfirmBtn.addEventListener('click', function() {
            confirmModal.classList.remove('active');
        });
        
        newCloseConfirmModalBtn.addEventListener('click', function() {
            confirmModal.classList.remove('active');
        });
        
        // Tampilkan modal
        confirmModal.classList.add('active');
    }

    // Fungsi untuk memformat tanggal
    function formatDate(date) {
        const d = new Date(date);
        return d.toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'short', 
            day: 'numeric' 
        });
    }

    // Fungsi untuk menghitung selisih waktu antara dua tanggal
    function getTimeDifference(startDate, endDate) {
        const start = new Date(startDate);
        const end = new Date(endDate);
        const diffTime = Math.abs(end - start);
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        const diffHours = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));
        
        if (diffDays > 0) {
            return `${diffDays}d ${diffHours}h ${diffMinutes}m`;
        } else if (diffHours > 0) {
            return `${diffHours}h ${diffMinutes}m`;
        } else {
            return `${diffMinutes}m`;
        }
    }

    // Fungsi untuk merender kartu laporan solved
    function renderReportCards() {
        const reportsGrid = document.getElementById('reportsGrid');
        const noReports = document.getElementById('noReports');
        const reports = getSolvedReports();
        
        // Apply filters
        const brandFilter = document.getElementById('brandFilter').value;
        const categoryFilter = document.getElementById('categoryFilter').value;
        const dateFrom = document.getElementById('dateFilterFrom').value;
        const dateTo = document.getElementById('dateFilterTo').value;
        
        let filteredReports = reports;
        
        if (brandFilter) {
            filteredReports = filteredReports.filter(report => report.brand === brandFilter);
        }
        
        if (categoryFilter) {
            filteredReports = filteredReports.filter(report => report.category === categoryFilter);
        }
        
        if (dateFrom) {
            const fromDate = new Date(dateFrom);
            filteredReports = filteredReports.filter(report => new Date(report.dateSolved) >= fromDate);
        }
        
        if (dateTo) {
            const toDate = new Date(dateTo);
            toDate.setHours(23, 59, 59, 999); // End of the day
            filteredReports = filteredReports.filter(report => new Date(report.dateSolved) <= toDate);
        }
        
        if (filteredReports.length === 0) {
            reportsGrid.innerHTML = '';
            noReports.style.display = 'block';
            return;
        }
        
        noReports.style.display = 'none';
        reportsGrid.innerHTML = '';
        
        // Urutkan laporan berdasarkan tanggal solved (terbaru di atas)
        const sortedReports = [...filteredReports].sort((a, b) => 
            new Date(b.dateSolved) - new Date(a.dateSolved)
        );
        
        sortedReports.forEach(report => {
            const resolutionTime = getTimeDifference(report.dateCreated, report.dateSolved);
            
            const reportCard = document.createElement('div');
            reportCard.className = 'report-card fade-in';
            reportCard.innerHTML = `
                <div class="report-card-header">
                    <span class="report-id">${report.id}</span>
                    <span class="status status-completed">Solved</span>
                </div>
                <div class="report-card-body">
                    <h3 class="report-title">${report.title}</h3>
                    <p class="report-desc">${report.description}</p>
                    <div class="report-meta">
                        <span class="brand brand-${report.brand.toLowerCase().replace(/[^a-z0-9]/g, '-')}">${report.brand}</span>
                        <span class="report-date">Solved: ${formatDate(report.dateSolved)}</span>
                    </div>
                </div>
                <div class="report-card-footer">
                    <button class="btn btn-outline btn-sm view-report-btn" data-id="${report.id}">
                        <i class="fas fa-eye"></i> View
                    </button>
                    <button class="btn btn-danger btn-sm delete-report-btn" data-id="${report.id}">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                    <button class="btn btn-warning btn-sm reopen-report-btn" data-id="${report.id}">
                        <i class="fas fa-undo"></i> Reopen
                    </button>
                </div>
            `;
            
            reportsGrid.appendChild(reportCard);
        });
        
        // Tambahkan event listener untuk tombol view
        document.querySelectorAll('.view-report-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const reportId = this.getAttribute('data-id');
                viewReportDetails(reportId);
            });
        });
        
        // Tambahkan event listener untuk tombol delete
        document.querySelectorAll('.delete-report-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const reportId = this.getAttribute('data-id');
                showConfirmModal(`Are you sure you want to delete report ${reportId}? This action cannot be undone.`, function() {
                    const success = deleteReport(reportId);
                    if (success) {
                        renderReportCards();
                    }
                });
            });
        });
        
        // Tambahkan event listener untuk tombol reopen
        document.querySelectorAll('.reopen-report-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const reportId = this.getAttribute('data-id');
                showConfirmModal(`Are you sure you want to reopen report ${reportId}? It will be moved back to Pending Reports.`, function() {
                    const success = reopenReport(reportId);
                    if (success) {
                        renderReportCards();
                    }
                });
            });
        });
    }

    // Fungsi untuk menampilkan detail laporan
    function viewReportDetails(reportId) {
        const reports = getSolvedReports();
        const report = reports.find(r => r.id === reportId);
        
        if (!report) {
            showToast('Report not found!', 'error');
            return;
        }
        
        const resolutionTime = getTimeDifference(report.dateCreated, report.dateSolved);
        const resolutionDescription = report.resolutionDescription || 'No resolution description provided.';
        
        // Isi modal dengan data laporan
        document.querySelector('.modal-title').innerHTML = `<i class="fas fa-file-alt"></i> ${report.title}`;
        document.getElementById('detailReportId').textContent = report.id;
        document.getElementById('detailReportStatus').innerHTML = `<span class="status-completed">Solved</span>`;
        document.getElementById('detailReportBrand').innerHTML = `<span class="brand brand-${report.brand.toLowerCase().replace(/[^a-z0-9]/g, '-')}">${report.brand}</span>`;
        document.getElementById('detailReportCategory').textContent = report.category;
        document.getElementById('detailReportDateCreated').textContent = formatDate(report.dateCreated);
        document.getElementById('detailReportDateSolved').textContent = formatDate(report.dateSolved);
        document.getElementById('detailReportResolutionTime').textContent = resolutionTime;
        
        // Tampilkan deskripsi asli dan deskripsi penyelesaian
        document.getElementById('detailReportDescription').innerHTML = `<p>${report.description}</p>`;
        document.getElementById('detailReportResolution').innerHTML = `<p>${resolutionDescription}</p>`;
        
        // Set data attribute untuk tombol
        document.getElementById('deleteReportBtn').setAttribute('data-id', reportId);
        document.getElementById('reopenReportBtn').setAttribute('data-id', reportId);
        
        // Tampilkan modal
        const reportModal = document.getElementById('reportModal');
        reportModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Fungsi untuk mengekspor laporan
    function exportReports() {
        const reports = getSolvedReports();
        
        if (reports.length === 0) {
            showToast('No reports to export!', 'error');
            return;
        }
        
        // Format data untuk CSV
        let csvContent = "ID,Title,Category,Brand,Date Created,Date Solved,Resolution Time\n";
        
        reports.forEach(report => {
            const resolutionTime = getTimeDifference(report.dateCreated, report.dateSolved);
            csvContent += `"${report.id}","${report.title}","${report.category}","${report.brand}","${formatDate(report.dateCreated)}","${formatDate(report.dateSolved)}","${resolutionTime}"\n`;
        });
        
        // Buat blob dan download
        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        const date = new Date().toISOString().slice(0, 10);
        
        link.setAttribute("href", url);
        link.setAttribute("download", `solved_reports_${date}.csv`);
        link.style.visibility = 'hidden';
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        showToast('Reports exported successfully!');
    }

    // Fungsi untuk mencari laporan
    function searchReports() {
        const searchTerm = document.getElementById('dashboardSearch').value.toLowerCase();
        const reportCards = document.querySelectorAll('.report-card');
        
        reportCards.forEach(card => {
            const title = card.querySelector('.report-title').textContent.toLowerCase();
            const description = card.querySelector('.report-desc').textContent.toLowerCase();
            const brand = card.querySelector('.brand').textContent.toLowerCase();
            
            if (title.includes(searchTerm) || description.includes(searchTerm) || brand.includes(searchTerm)) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    }

document.addEventListener('DOMContentLoaded', function() {
    // Initialize UI components
    renderReportCards();
    updateBadgeCounts();
    updateNotificationUI(); // Inisialisasi notifikasi
    
    
    
    // Event listener untuk tombol refresh
    const refreshButton = document.getElementById('refreshReports');
    if (refreshButton) {
        refreshButton.addEventListener('click', () => {
            renderReportCards();
            showToast('Solved reports refreshed successfully!', 'success');
        });
    }

// Event listener untuk tombol reset filter
const resetFiltersButton = document.getElementById('resetFilters');
if (resetFiltersButton) {
    resetFiltersButton.addEventListener('click', () => {
        const statusFilter = document.getElementById('statusFilter');
        const brandFilter = document.getElementById('brandFilter');
        const categoryFilter = document.getElementById('categoryFilter');
        const dateFilter = document.getElementById('dateFilter');

        if (statusFilter) statusFilter.value = '';
        if (brandFilter) brandFilter.value = '';
        if (categoryFilter) categoryFilter.value = '';
        if (dateFilter) dateFilter.value = '';

        renderReportCards();
        showToast('Filters have been refreshed!', 'success');
    });
}

        
        // Event listener untuk tombol export
        document.getElementById('exportReports').addEventListener('click', exportReports);
        
        // Event listener untuk tombol delete all
        document.getElementById('deleteAllReports').addEventListener('click', function() {
            if (getSolvedReports().length === 0) {
                showToast('No reports to delete!', 'error');
                return;
            }
            
            showConfirmModal('Are you sure you want to delete ALL solved reports? This action cannot be undone.', function() {
                const success = deleteAllReports();
                if (success) {
                    renderReportCards();
                }
            });
        });
        
        // Event listener untuk reset filters
        document.getElementById('resetFilters').addEventListener('click', function() {
            document.getElementById('brandFilter').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('dateFilterFrom').value = '';
            document.getElementById('dateFilterTo').value = '';
            renderReportCards();
        });
        
        // Event listener untuk filter changes
        document.getElementById('brandFilter').addEventListener('change', renderReportCards);
        document.getElementById('categoryFilter').addEventListener('change', renderReportCards);
        document.getElementById('dateFilterFrom').addEventListener('change', renderReportCards);
        document.getElementById('dateFilterTo').addEventListener('change', renderReportCards);
        
        // Event listener untuk pencarian
        document.getElementById('dashboardSearch').addEventListener('input', searchReports);
        
        // Event listener untuk close modal detail laporan
        document.getElementById('closeModal').addEventListener('click', function() {
            const reportModal = document.getElementById('reportModal');
            reportModal.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // Event listener untuk close modal detail laporan melalui button
        document.getElementById('closeModalBtn').addEventListener('click', function() {
            const reportModal = document.getElementById('reportModal');
            reportModal.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // Event listener untuk delete report button di modal
        document.getElementById('deleteReportBtn').addEventListener('click', function() {
            const reportId = this.getAttribute('data-id');
            const reportModal = document.getElementById('reportModal');
            
            showConfirmModal(`Are you sure you want to delete report ${reportId}? This action cannot be undone.`, function() {
                const success = deleteReport(reportId);
                if (success) {
                    reportModal.classList.remove('active');
                    document.body.style.overflow = '';
                    renderReportCards();
                }
            });
        });
        
        // Event listener untuk reopen report button di modal
        document.getElementById('reopenReportBtn').addEventListener('click', function() {
            const reportId = this.getAttribute('data-id');
            const reportModal = document.getElementById('reportModal');
            
            showConfirmModal(`Are you sure you want to reopen report ${reportId}? It will be moved back to Pending Reports.`, function() {
                const success = reopenReport(reportId);
                if (success) {
                    reportModal.classList.remove('active');
                    document.body.style.overflow = '';
                    renderReportCards();
                }
            });
        });
    });
</script>
</body>
</html>